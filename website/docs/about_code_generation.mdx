---
title: About code generation
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";
import fetchUser from "!!raw-loader!./about_codegen/main.dart";
import rawFetchUser from "!!raw-loader!./about_codegen/raw.dart";
import { trimSnippet, CodeSnippet } from "../src/components/CodeSnippet";
import syncStateless from "!!raw-loader!./about_codegen/provider_type/sync_stateless.dart";
import syncStateful from "!!raw-loader!./about_codegen/provider_type/sync_stateful.dart";
import asyncStatelessFuture from "!!raw-loader!./about_codegen/provider_type/async_stateless_future.dart";
import asyncStatefulFuture from "!!raw-loader!./about_codegen/provider_type/async_stateful_future.dart";
import asyncStatelessStream from "!!raw-loader!./about_codegen/provider_type/async_stateless_stream.dart";
import asyncStatefulStream from "!!raw-loader!./about_codegen/provider_type/async_stateful_stream.dart";
import provider from "!!raw-loader!./about_codegen/provider_type/non_code_gen/provider.dart";
import notifierProvider from "!!raw-loader!./about_codegen/provider_type/non_code_gen/notifier_provider.dart";
import futureProvider from "!!raw-loader!./about_codegen/provider_type/non_code_gen/future_provider.dart";
import asyncNotifierProvider from "!!raw-loader!./about_codegen/provider_type/non_code_gen/async_notifier_provider.dart";
import streamProvider from "!!raw-loader!./about_codegen/provider_type/non_code_gen/stream_provider.dart";
import streamNotifierProvider from "!!raw-loader!./about_codegen/provider_type/non_code_gen/stream_notifier_provider.dart";
import autoDisposeCodeGen from "!!raw-loader!./about_codegen/provider_type/auto_dispose.dart";
import autoDisposeNonCodeGen from "!!raw-loader!./about_codegen/provider_type/non_code_gen/auto_dispose.dart";
import familyCodeGen from "!!raw-loader!./about_codegen/provider_type/family.dart";
import familyNonCodeGen from "!!raw-loader!./about_codegen/provider_type/non_code_gen/family.dart";
const RED_STYLE = { color: "indianred", fontWeight: "700" };
const BLUE_STYLE = { color: "rgb(103, 134, 196)", fontWeight: "700" };
const RED_16_STYLE = {
  color: "indianred",
  fontSize: "16px",
  fontWeight: "700",
};
const BLUE_20_STYLE = {
  color: "rgb(103, 134, 196)",
  fontSize: "20px",
  fontWeight: "700",
};
const MAX_WIDTH_420 = { maxWidth: "420px" };
const PROVIDER_STYLE = {
  textAlign: "center",
  fontWeight: "600",
  maxWidth: "210px",
};
const BEFORE_STYLE = {
  textAlign: "center",
  fontWeight: "600",
  color: "crimson",
};
const AFTER_STYLE = {
  textAlign: "center",
  fontWeight: "600",
  color: "rgb(40,180,40)",
};

Code generation is the idea of using a tool to generate code for us.
In Dart, it comes with the downside of requiring an extra step to "compile"
an application. Although this problem may be solved in the near future, as the
Dart team is working on a potential solution to this problem.

In the context of Riverpod, code generation is about slightly changing the syntax
for defining a "provider". For example, instead of:

<CodeBlock language="dart">{trimSnippet(rawFetchUser)}</CodeBlock>

Using code generation, we would write:

<CodeBlock language="dart">{trimSnippet(fetchUser)}</CodeBlock>

When using Riverpod, code generation is completely optional. It is entirely possible
to use Riverpod without.
At the same time, Riverpod embraces code generation and recommends using it.

For information on how to install and use Riverpod's code generator, refer to
the [getting started](./getting_started) page. Make sure to enable code generation
in the documentation's sidebar.

## Why use code generation with Riverpod?

You may be wondering: "If code generation is optional in Riverpod, why use it?"

As always with packages: To make your life easier.
This includes but is not limited to:

- better syntax, more readable/flexible and with reduced learning curve.

  - No need to worry about `FutureProvider` vs `Provider` vs etc. Write your logic,
    and Riverpod will pick the most suitable provider for you.
  - Passing parameters to providers is now unrestricted. Instead of being limited to
    using [family](./concepts/modifiers/family) and passing a single positional parameter,
    you can now pass any form of parameter. This includes named parametes, optional ones,
    and even default values.

- **stateful hot-reload** of the code written in Riverpod.
- better debugging, through the generation of extra metadata that the debugger then picks-up.
- some Riverpod features will be available only with code generation.

At the same time, many applications already use code generation with packages such
as [Freezed](https://pub.dev/packages/freezed) or [json_serializable](https://pub.dev/packages/json_serializable).
In that case, your project probably is already setup for code generation, and
using for Riverpod should be simple.

## The Syntax

### Defining a provider:

When defining a provider using code generation, there are two key points to consider:

1. <span style={RED_STYLE}>Sync/Async</span> initialization: Choose the appropriate
   return type based on whether the state is initialized synchronously or asynchronously.
2. <span style={BLUE_STYLE}>Function/Class</span> syntax: Choose between function-based
   or class-based syntax depending on whether you need to perform side-effects using
   public methods or not.

<table>
  <colgroup>
    <col style={{ minWidth: "180px", maxWidth: "180px" }} />
    <col style={MAX_WIDTH_420} />
    <col style={MAX_WIDTH_420} />
  </colgroup>
  <tr>
    <th></th>
    <th style={{ textAlign: "center" }}>
      <span style={BLUE_20_STYLE}>Function-Based</span>
      <br />
      (Canâ€™t perform side-effects
      <br />
      using public methods)
    </th>
    <th style={{ textAlign: "center" }}>
      <span style={BLUE_20_STYLE}>Class-Based</span>
      <br />
      (Can perform side-effects
      <br />
      using public methods)
    </th>
  </tr>
  <tr>
    <td>
      <span style={RED_16_STYLE}>Sync initialization</span>
    </td>
    <td style={MAX_WIDTH_420}>
      <CodeBlock language="dart">{trimSnippet(syncStateless)}</CodeBlock>
    </td>
    <td style={MAX_WIDTH_420}>
      <CodeBlock language="dart">{trimSnippet(syncStateful)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td>
      <span style={RED_16_STYLE}>Async initialization - Returns a Future</span>
    </td>
    <td style={MAX_WIDTH_420}>
      <CodeBlock language="dart">{trimSnippet(asyncStatelessFuture)}</CodeBlock>
    </td>
    <td style={MAX_WIDTH_420}>
      <CodeBlock language="dart">{trimSnippet(asyncStatefulFuture)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td>
      <span style={RED_16_STYLE}>Async initialization - Returns a Stream</span>
    </td>
    <td style={MAX_WIDTH_420}>
      <CodeBlock language="dart">{trimSnippet(asyncStatelessStream)}</CodeBlock>
    </td>
    <td style={MAX_WIDTH_420}>
      <CodeBlock language="dart">{trimSnippet(asyncStatefulStream)}</CodeBlock>
    </td>
  </tr>
</table>

## Migrate from non-code-generation variant:

When using non-code-generation variant, it is necessary to manually determine the type of your provider.
The following are the corresponding options for transitioning into code-generation variant:

<table>
  <tr>
    <td style={PROVIDER_STYLE} rowspan="2">
      Provider
    </td>
    <td style={BEFORE_STYLE}>Before</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(provider)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={AFTER_STYLE}>After</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(syncStateless)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={PROVIDER_STYLE} rowspan="2">
      NotifierProvider
    </td>
    <td style={BEFORE_STYLE}>Before</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(notifierProvider)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={AFTER_STYLE}>After</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(syncStateful)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={PROVIDER_STYLE} rowspan="2">
      FutureProvider
    </td>
    <td style={BEFORE_STYLE}>Before</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(futureProvider)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={AFTER_STYLE}>After</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(asyncStatelessFuture)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={PROVIDER_STYLE} rowspan="2">
      StreamProvider
    </td>
    <td style={BEFORE_STYLE}>Before</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(streamProvider)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={AFTER_STYLE}>After</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(asyncStatelessStream)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={PROVIDER_STYLE} rowspan="2">
      AsyncNotifierProvider
    </td>
    <td style={BEFORE_STYLE}>Before</td>
    <td>
      <CodeBlock language="dart">
        {trimSnippet(asyncNotifierProvider)}
      </CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={AFTER_STYLE}>After</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(asyncStatefulFuture)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={PROVIDER_STYLE} rowspan="2">
      StreamNotifierProvider
    </td>
    <td style={BEFORE_STYLE}>Before</td>
    <td>
      <CodeBlock language="dart">
        {trimSnippet(streamNotifierProvider)}
      </CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={AFTER_STYLE}>After</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(asyncStatefulStream)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={PROVIDER_STYLE} rowspan="2">
      .autoDispose
    </td>
    <td style={BEFORE_STYLE}>Before</td>
    <td>
      <CodeBlock language="dart">
        {trimSnippet(autoDisposeNonCodeGen)}
      </CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={AFTER_STYLE}>After</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(autoDisposeCodeGen)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={PROVIDER_STYLE} rowspan="2">
      .family
    </td>
    <td style={BEFORE_STYLE}>Before</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(familyNonCodeGen)}</CodeBlock>
    </td>
  </tr>
  <tr>
    <td style={AFTER_STYLE}>After</td>
    <td>
      <CodeBlock language="dart">{trimSnippet(familyCodeGen)}</CodeBlock>
    </td>
  </tr>
</table>

These providers are covered in-details at [All Providers](providers/provider).

[hookwidget]: https://pub.dev/documentation/flutter_hooks/latest/flutter_hooks/HookWidget-class.html
[statefulwidget]: https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html
[riverpod]: https://github.com/rrousselgit/riverpod
[hooks_riverpod]: https://pub.dev/packages/hooks_riverpod
[flutter_riverpod]: https://pub.dev/packages/flutter_riverpod
[flutter_hooks]: https://github.com/rrousselGit/flutter_hooks
[build]: https://pub.dev/documentation/riverpod/latest/riverpod/Notifier/build.html
