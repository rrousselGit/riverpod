---
title: 关于代码生成
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";
import fetchUser from "!!raw-loader!./about_codegen/main.dart";
import rawFetchUser from "!!raw-loader!./about_codegen/raw.dart";
import {
  trimSnippet,
  CodeSnippet,
} from "../../../../src/components/CodeSnippet";

代码生成是指使用工具为我们生成代码。

在 Dart 中，它的缺点是需要额外的步骤来“编译”应用。尽管这个问题可能会在不久的将来得到解决，但 Dart 团队正在研究并解决这个问题的潜在方案。

在 Riverpod 的上下文中，代码生成就是稍微改变定义 provider 的语法。比如原本我们写：

<CodeBlock language="dart">{trimSnippet(rawFetchUser)}</CodeBlock>

使用代码生成，我们会写：

<CodeBlock language="dart">{trimSnippet(fetchUser)}</CodeBlock>

使用 Riverpod 时，代码生成是完全可选的。当然你也完全可以不使用。

与此同时，Riverpod 支持代码生成，且推荐你使用它。

有关如何安装和使用Riverpod的代码生成器的信息，请参阅 [开始上手](./getting_started) 页面。确保在文档的侧边栏中启用代码生成。

## 为什么在 Riverpod 中使用代码生成？

你可能会问：“在 Riverpod 中代码生成是可选的，那我为什么要用？”

答案是让你的编程变得更简单。

这包括但不限于：

- 更好的语法, 更可读且更灵活，而且还能减少学习曲线。
  - 不需要自己去选 `FutureProvider`、`Provider` 还是其他 provider。你只要写下你的逻辑，Riverpod 将为你选择最合适的 provider。
  - 向 provider 传递参数现在不受限制。不再局限于使用 [family](./concepts/modifiers/family) 和传递单个参数，现在你可以传递任何形式的参数。这包括命名参数、可选参数甚至默认值。
- 在 Riverpod 中编写的代码支持，**有状态热重载**。
- 更好地调试，通过生成额外的元数据然后用调试器调试。
- Riverpod 的一些功能将只支持代码生成。

与此同时，许多应用程序中已经使用了代码生成比如 [Freezed](https://pub.dev/packages/freezed) 或 [json_serializable](https://pub.dev/packages/json_serializable)。

在这种情况下，你的项目可能就已经配置好了，使用 Riverpod 应该很简单。

[hookwidget]: https://pub.dev/documentation/flutter_hooks/latest/flutter_hooks/HookWidget-class.html
[statefulwidget]: https://api.flutter.dev/flutter/widgets/StatefulWidget-class.html
[riverpod]: https://github.com/rrousselgit/riverpod
[hooks_riverpod]: https://pub.dev/packages/hooks_riverpod
[flutter_riverpod]: https://pub.dev/packages/flutter_riverpod
[flutter_hooks]: https://github.com/rrousselGit/flutter_hooks
